@import se.lu.nateko.cp.meta.core.data.EnvriConfig
@import se.lu.nateko.cp.meta.core.data.DataObject
@import se.lu.nateko.cp.meta.core.data.staticObjLandingPage

@(dobj: DataObject)(implicit envriConf: EnvriConfig)
<div class="text-end flex-shrink-0">
	@dobj.accessUrl.map{link =>
		@previewButton
		<button id="meta-add-to-cart-button" class="btn btn-primary d-none mb-1" data-id="@{staticObjLandingPage(dobj.hash)}">Add to cart</button>
		<button id="meta-remove-from-cart-button" class="btn btn-primary d-none mb-1" data-id="@{staticObjLandingPage(dobj.hash)}">Remove from cart</button>
		<a class="btn btn-primary mb-1" href="@link">Download</a>
	}
</div>

@previewURL(id: String) = @{
	s"""https://${envriConf.dataHost}/portal/#{"route":"preview","preview":["$id"]}"""
}

@previewButton = {
	@if(dobj.isPreviewable) {
		<a class="btn btn-secondary mb-1" href="@previewURL(dobj.hash.id)">Preview</a>
	} else {
		<a class="btn btn-secondary mb-1 disabled pe-auto" title="No preview available" disabled="" style="cursor: not-allowed;">Preview</a>
	}
}
